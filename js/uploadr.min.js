/* Uploadr v1.1.0 by Sarah Dayan | http://demos.sarahdayan.com/uploadr */
!function(e){e.fn.uploadr=function(t){function a(e,t,a){e.html(t),l(a)}function n(e,t,a){e.html('<img src="" alt="">');var n=new FileReader;n.addEventListener("load",function(){e.find("img")[0].src=n.result},!1),t&&n.readAsDataURL(t),l(a)}function d(e,t,a){a="undefined"==typeof a?!0:a,e[0].value=null,t.addClass("uploadr-new").removeClass("uploadr-exists"),g="",a&&u()}function l(e){e?o():i()}function o(){r.addFileEvent()}function i(){r.changeFileEvent()}function u(){r.deleteFileEvent()}var r=e.extend({layout:"default",displayPreview:!0,deleteButton:!0,loadButtonText:"Load a file",changeButtonText:"Change",deleteButtonText:"Delete",addFileEvent:function(){},changeFileEvent:function(){},deleteFileEvent:function(){}},t),s=this;s.wrap('<div class="uploadr uploadr-new '+r.layout+'"></div>').wrap('<div class="uploadr-buttons">').parents(".uploadr-buttons").before('<div class="uploadr-exists uploadr-preview"></div>').after('<div class="uploadr-exists uploadr-button uploadr-delete">'+r.deleteButtonText+"</div>").end().before('<div class="uploadr-new uploadr-button uploadr-load">'+r.loadButtonText+"</div>").before('<div class="uploadr-exists uploadr-button uploadr-change">'+r.changeButtonText+"</div>");var p=s.parents(".uploadr"),c=p.find(".uploadr-delete"),v=p.find(".uploadr-preview"),f=["image/jpeg","image/png","image/gif"],g="",w=!0,x="";d(s,p,!1),r.deleteButton||c.hide(),s.on("change",function(){s[0].value?(w=""!==g?!1:!0,g=s[0].value,p.removeClass("uploadr-new").addClass("uploadr-exists"),r.displayPreview&&(window.FileReader?(x=s[0].files[0],-1!=f.indexOf(x.type)?n(v,x,w):a(v,x.name,w)):(x=s[0].value.match(/[^\/\\]+$/),a(v,x,w)))):p.addClass("uploadr-new").removeClass("uploadr-exists")}),c.on("click",function(){d(s,p)})}}(jQuery);
