/* Uploadr v1.1.0 by Sarah Dayan | http://demos.sarahdayan.com/uploadr */
!function(e){e.fn.uploadr=function(a){function t(e,a,t){e.html(a),l(t)}function n(e,a,t){e.html('<img src="" alt="">');var n=new FileReader;n.addEventListener("load",function(){e.find("img")[0].src=n.result},!1),a&&n.readAsDataURL(a),l(t)}function d(e,a,t){var t="undefined"==typeof t?!0:t;e[0].value=null,a.addClass("uploadr-new").removeClass("uploadr-exists"),g="",t&&u()}function l(e){e?o():i()}function o(){r.addFileEvent()}function i(){r.changeFileEvent()}function u(){r.deleteFileEvent()}var r=e.extend({layout:"default",displayPreview:!0,deleteButton:!0,loadButtonText:"Load a file",changeButtonText:"Change",deleteButtonText:"Delete",addFileEvent:function(){},changeFileEvent:function(){},deleteFileEvent:function(){}},a),s=this;s.wrap('<div class="uploadr uploadr-new '+r.layout+'"></div>').wrap('<div class="uploadr-buttons">').parents(".uploadr-buttons").before('<div class="uploadr-exists uploadr-preview"></div>').after('<div class="uploadr-exists uploadr-button uploadr-delete">'+r.deleteButtonText+"</div>").end().before('<div class="uploadr-new uploadr-button uploadr-load">'+r.loadButtonText+"</div>").before('<div class="uploadr-exists uploadr-button uploadr-change">'+r.changeButtonText+"</div>");var p=s.parents(".uploadr"),f=(p.find(".uploadr-load"),p.find(".uploadr-change"),p.find(".uploadr-delete")),v=p.find(".uploadr-preview"),c=["image/jpeg","image/png","image/gif"],g="",w=!0;d(s,p,!1),r.deleteButton||f.hide(),s.on("change",function(){if(s[0].value){if(w=""!=g?!1:!0,g=s[0].value,p.removeClass("uploadr-new").addClass("uploadr-exists"),r.displayPreview)if(window.FileReader){var e=s[0].files[0];-1!=c.indexOf(e.type)?n(v,e,w):t(v,e.name,w)}else{var e=s[0].value.match(/[^\/\\]+$/);t(v,e,w)}}else p.addClass("uploadr-new").removeClass("uploadr-exists")}),f.on("click",function(){d(s,p)})}}(jQuery);
