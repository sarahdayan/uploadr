/* Uploadr v1.0.0 by Sarah Dayan | http://demos.sarahdayan.com/uploadr */
!function(e){e.fn.uploadr=function(a){function d(e,a){e.html(a)}function l(e,a){e[0].value=null,a.addClass("uploadr-new").removeClass("uploadr-exists")}var t=e.extend({layout:"default",displayPreview:!0,deleteButton:!0,loadButtonText:"Load a file",changeButtonText:"Change",deleteButtonText:"Delete"},a),o=this;o.wrap('<div class="uploadr uploadr-new '+t.layout+'"></div>').wrap('<div class="uploadr-buttons">').parents(".uploadr-buttons").before('<div class="uploadr-exists uploadr-preview"></div>').after('<div class="uploadr-exists uploadr-button uploadr-delete">'+t.deleteButtonText+"</div>").end().before('<div class="uploadr-new uploadr-button uploadr-load">'+t.loadButtonText+"</div>").before('<div class="uploadr-exists uploadr-button uploadr-change">'+t.changeButtonText+"</div>");var n=o.parents(".uploadr"),u=(n.find(".uploadr-load"),n.find(".uploadr-change"),n.find(".uploadr-delete")),i=n.find(".uploadr-preview"),r=["image/jpeg","image/png","image/gif"];l(o,n),t.deleteButton||u.hide(),o.on("change",function(){if(o[0].value){if(n.removeClass("uploadr-new").addClass("uploadr-exists"),t.displayPreview)if(window.FileReader){var e=o[0].files[0];if(-1!=r.indexOf(e.type)){i.html('<img src="" alt="">');var a=new FileReader;a.addEventListener("load",function(){i.find("img")[0].src=a.result},!1),e&&a.readAsDataURL(e)}else d(i,e.name)}else{var e=o[0].value.match(/[^\/\\]+$/);d(i,e)}}else n.addClass("uploadr-new").removeClass("uploadr-exists")}),u.on("click",function(){l(o,n)})}}(jQuery);
