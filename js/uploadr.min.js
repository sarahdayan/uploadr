/* Uploadr v1.1.0 by Sarah Dayan | https://sarahdayan.github.io/uploadr */
!function(e){e.fn.uploadr=function(t){function a(e,t,a){e.html(t),d(a)}function n(e,t,a){e.html('<img src="" alt="">');var n=new FileReader;n.addEventListener("load",function(){e.find("img")[0].src=n.result},!1),t&&n.readAsDataURL(t),d(a)}function l(e,t,a){a="undefined"==typeof a?!0:a,e[0].value=null,t.addClass("uploadr-new").removeClass("uploadr-exists"),c="",a&&e.trigger("deleteFile")}function d(e){i.trigger(e?"addFile":"changeFile")}var o=e.extend({layout:"default",displayPreview:!0,deleteButton:!0,loadButtonText:"Load a file",changeButtonText:"Change",deleteButtonText:"Delete",addFileEvent:function(){},changeFileEvent:function(){},deleteFileEvent:function(){}},t),i=this;i.wrap('<div class="uploadr uploadr-new '+o.layout+'"></div>').wrap('<div class="uploadr-buttons">').parents(".uploadr-buttons").before('<div class="uploadr-exists uploadr-preview"></div>').after('<div class="uploadr-exists uploadr-button uploadr-delete">'+o.deleteButtonText+"</div>").end().before('<div class="uploadr-new uploadr-button uploadr-load">'+o.loadButtonText+"</div>").before('<div class="uploadr-exists uploadr-button uploadr-change">'+o.changeButtonText+"</div>");var u=i.parents(".uploadr"),r=u.find(".uploadr-delete"),s=u.find(".uploadr-preview"),p=["image/jpeg","image/png","image/gif"],c="",v=!0,f="";l(i,u,!1),o.deleteButton||r.hide(),i.on("change",function(){i[0].value?(v=""!==c?!1:!0,c=i[0].value,u.removeClass("uploadr-new").addClass("uploadr-exists"),o.displayPreview&&(window.FileReader?(f=i[0].files[0],-1!=p.indexOf(f.type)?n(s,f,v):a(s,f.name,v)):(f=i[0].value.match(/[^\/\\]+$/),a(s,f,v)))):u.addClass("uploadr-new").removeClass("uploadr-exists")}),r.on("click",function(){l(i,u)}),i.on("addFile",function(){o.addFileEvent()}),i.on("changeFile",function(){o.changeFileEvent()}),i.on("deleteFile",function(){o.deleteFileEvent()})}}(jQuery);
